{% extends "base.html" %}
{% load static %}

{% block title %}FSLAYERS | Главная{% endblock %}

{% block content %}
<main class="main">
    <div class="main__container">
        <div class="search__wrap">
            <form class="search__form" method="GET" id="filterForm">
                <div class="search__input-container">
                    <input type="search" 
                           class="search__form-input" 
                           placeholder="Поиск по услугам..." 
                           name="search" 
                           value="{{ search_query }}">
                    <button type="submit" class="search__button">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M11 19C15.4183 19 19 15.4183 19 11C19 6.58172 15.4183 3 11 3C6.58172 3 3 6.58172 3 11C3 15.4183 6.58172 19 11 19Z" stroke="#FF0000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M21 21L16.65 16.65" stroke="#FF0000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
                
                <button type="button" class="filters__toggle" id="filtersToggle">
                    <span>Фильтры</span>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M6 9L12 15L18 9" stroke="#FF0000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                
                <div class="filters" id="filtersContainer">
                    <div class="filters__section">
                        <h3 class="filters__title">Категории</h3>
                        <div class="filters__checkboxes">
                            {% for value, label in category_choices %}
                            <label class="filters__checkbox-label">
                                <input type="checkbox" 
                                       class="filters__checkbox" 
                                       name="category" 
                                       value="{{ value }}"
                                       {% if value in selected_categories %}checked{% endif %}>
                                    <span class="filters__custom-checkbox"></span>
                                    <span>{{ label }}</span>
                            </label>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <div class="filters__section">
                        <div class="filters__section">
                            <h3 class="filters__title">Срок выполнения</h3>
                            <div class="filters__days-input">
                                <input type="number" 
                                       class="filters__input" 
                                       id="daysInput" 
                                       placeholder="Кол-во" 
                                       min="1" 
                                       name="days" 
                                       value="{{ max_days }}">
                                <span>дней</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="filters__section">
                        <div class="filters__price-header">
                            <h3 class="filters__title">Бюджет</h3>
                            <label class="filters__negotiable-label">
                                <input type="checkbox" 
                                       class="filters__negotiable" 
                                       id="negotiableCheckbox" 
                                       name="negotiable" 
                                       {% if negotiable %}checked{% endif %}>
                                <span class="filters__custom-checkbox"></span>
                                <span>Договорной</span>
                            </label>
                        </div>
                        <div class="filters__price-range" id="priceRangeContainer">
                            <div class="filters__slider">
                                <div class="filters__track"></div>
                                <input type="range" 
                                       min="0" 
                                       max="1000000" 
                                       value="{{ price_min|default:'0' }}" 
                                       class="filters__range" 
                                       id="priceMin">
                                <input type="range" 
                                       min="0" 
                                       max="1000000" 
                                       value="{{ price_max|default:'1000000' }}" 
                                       class="filters__range" 
                                       id="priceMax">
                            </div>
                            <div class="filters__range-inputs">
                                <div class="filters__range-input">
                                    <label>От</label>
                                    <input type="text"  
                                           class="filters__price-input" 
                                           id="priceMinInput" 
                                           name="priceMin" 
                                           value="{{ price_min|default:'0' }}">
                                </div>
                                <div class="filters__range-input">
                                    <label>До</label>
                                    <input type="text"
                                           class="filters__price-input" 
                                           id="priceMaxInput" 
                                           name="priceMax" 
                                           value="{{ price_max|default:'1000000' }}">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <div class="orders" id="ordersContainer">
            {% include 'pages/order_list.html' %}
        </div>
    </div>
</main>

<script src="{% static 'js/filters.js' %}"></script>
{% endblock %}